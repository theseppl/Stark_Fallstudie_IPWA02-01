<?xml version='1.0' encoding='UTF-8' ?>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:ui="http://java.sun.com/jsf/facelets">

<h:outputStylesheet library="css" name="style.css" />

<h:head>
	<title>Netz melden</title>
</h:head>

<h:body>

	<!-- Menüleiste separat -->
	<h:form>
		<ui:include src="menubar.xhtml" />
	</h:form>

	<div class="card">
		<h:panelGrid columns="2"
			style="vertical-align: middle; align-items: center;">
			<p:graphicImage name="whaleLogo.png" library="images" width="40" />
			<h:outputText value="Shea Sepherd – Ghost Net Fishing"
				styleClass="logoTitle" />
		</h:panelGrid>
	</div>

	<p:card style="width: 90%; padding: 50px;">
		<!-- Hauptformular -->
		<h:form>
			<p:accordionPanel widgetVar="basic" scrollIntoView="center">
				<!-- TAB 1: Breitengrad -->
				<p:tab title="Breitengrad des Fundortes (N/S xx° xx' xx&quot;)">
					<h:panelGrid columns="8" cellpadding="8" style="vertical-align:top">

						<h:panelGroup>
							<p:selectOneRadio id="latitude_zone" required="true"
								requiredMessage="Bitte geben Sie die Hemisphäre an!"
								value="#{netzDAO.net.northSouth}" layout="pageDirection"
								columns="2">
								<f:selectItem itemLabel="Nord" itemValue="Nord" />
								<f:selectItem itemLabel="Süd" itemValue="Süd" />
							</p:selectOneRadio>
							<h:outputText value="Hemisphäre"
								style="font-size:small; color:gray; text-align:center;" />
						</h:panelGroup>

						<h:panelGroup>
							<p:inputText id="lat_degree"
								value="#{netzDAO.net.latituteDegree}" style="width:80px" />
							<p:slider for="lat_degree" minValue="0" maxValue="90"
								style="width:80px;" />
							<h:outputText value="° (Grad)"
								style="font-size:small; color:gray;" />
						</h:panelGroup>

						<h:panelGroup>
							<p:inputText id="lat_minute"
								value="#{netzDAO.net.latituteMinute}" style="width:80px" />
							<p:slider for="lat_minute" minValue="0" maxValue="59"
								style="width:80px;" />
							<h:outputText value="' (Minuten)"
								style="font-size:small; color:gray;" />
						</h:panelGroup>

						<h:panelGroup>
							<p:inputText id="lat_seconds"
								value="#{netzDAO.net.latituteSeconds}" style="width:80px" />
							<p:slider for="lat_seconds" minValue="0" maxValue="59"
								style="width:80px;" />
							<h:outputText value="″ (Sekunden)"
								style="font-size:small; color:gray;" />
						</h:panelGroup>

					</h:panelGrid>
				</p:tab>

				<!-- TAB 2: Längengrad -->
				<p:tab title="Längengrad des Fundortes (W/O xxx° xx' xx&quot;)">
					<h:panelGrid columns="8" cellpadding="8" style="vertical-align:top">

						<h:panelGroup>
							<p:selectOneRadio id="longitude_zone" required="true"
								requiredMessage="Bitte geben Sie die Längenzone an!"
								value="#{netzDAO.net.eastWest}" layout="grid" columns="2">
								<f:selectItem itemLabel="West" itemValue="West" />
								<f:selectItem itemLabel="Ost" itemValue="Ost" />
							</p:selectOneRadio>
							<h:outputText value="Längenzone"
								style="font-size:small; color:gray; text-align:center;" />
						</h:panelGroup>

						<h:panelGroup>
							<p:inputText id="long_degree"
								value="#{netzDAO.net.longituteDegree}" style="width:80px" />
							<p:slider for="long_degree" minValue="0" maxValue="180"
								style="width:80px;" />
							<h:outputText value="° (Grad)"
								style="font-size:small; color:gray;" />
						</h:panelGroup>

						<h:panelGroup>
							<p:inputText id="long_minute"
								value="#{netzDAO.net.longituteMinute}" style="width:80px" />
							<p:slider for="long_minute" minValue="0" maxValue="59"
								style="width:80px;" />
							<h:outputText value="' (Minuten)"
								style="font-size:small; color:gray;" />
						</h:panelGroup>

						<h:panelGroup>
							<p:inputText id="long_seconds"
								value="#{netzDAO.net.longituteSeconds}" style="width:80px" />
							<p:slider for="long_seconds" minValue="0" maxValue="59"
								style="width:80px;" />
							<h:outputText value="″ (Sekunden)"
								style="font-size:small; color:gray;" />
						</h:panelGroup>

					</h:panelGrid>
				</p:tab>

				<!-- TAB 3: Netzgröße & Datum -->
				<p:tab title="Größe des Netzes und Meldungsdatum">
					<h:panelGrid columns="4" cellpadding="8" style="vertical-align:top">
						<!-- Slider Netzgröße -->
						<h:panelGroup>
							<p:inputText id="net_size" value="#{netzDAO.net.netSize}"
								style="width:200px; margin-top:1px;" />
							<p:slider for="net_size" minValue="1" maxValue="50000"
								style="width:200px; margin-top:4px;" />
							<h:outputText value="m²"
								style="font-size:small; color:gray; margin-top:4px;" />
						</h:panelGroup>
						<h:outputText value="Meldungsdatum: #{netzDAO.net.notificationDate }"
								style="font-size:medium; color:gray; margin:4px; display:block;" />
					</h:panelGrid>
				</p:tab>
			</p:accordionPanel>

			<!-- Toggle + Buttons -->
			<p:card style="width: 30em; margin: 20px 0">
				<h4>Wollen Sie das Geisternetz anonym melden?</h4>
				<p:selectBooleanButton value="#{netzDAO.anonym}" onLabel="Ja"
					offLabel="Nein" onIcon="pi pi-check" offIcon="pi pi-times"
					style="width:6rem">
					<p:ajax update="personPanel" />
				</p:selectBooleanButton>
			</p:card>

			<!-- Personendaten nur anzeigen, wenn nicht anonym -->
			<p:outputPanel id="personPanel" layout="block">
				<p:card style="width: 30em;" rendered="#{!netzDAO.anonym}">
					<f:facet name="title">Bitte Informationen zu Ihrer Person eingeben.</f:facet>

					<h:panelGroup layout="block" style="width: 350px; margin: 0 auto;">
						<div style="display: flex; flex-direction: column; gap: 20px;">

							<p:divider align="center">
								<span class="ui-tag">Anmeldung über Ihre Personen-ID...</span>
							</p:divider>

							<div
								style="display: flex; justify-content: space-between; align-items: center;">
								<p:outputLabel value="Personen-ID (optional):" for="personId" />
								<p:inputText id="personId" value="#{personDAO.personId}"
									size="25" style="width: 200px;" />
							</div>

							<p:divider align="center">
								<span class="ui-tag">...oder über Ihre persönliche Daten.</span>
							</p:divider>

							<div
								style="display: flex; justify-content: space-between; align-items: center;">
								<p:outputLabel value="Vorname:" for="firstName" />
								<p:inputText id="firstName"
									value="#{personDAO.person.firstName}" size="25"
									style="width: 200px;" />
							</div>
							<div
								style="display: flex; justify-content: space-between; align-items: center;">
								<p:outputLabel value="Nachname:" for="lastName" />
								<p:inputText id="lastName" value="#{personDAO.person.lastName}"
									size="25" style="width: 200px;" />
							</div>
							<div
								style="display: flex; justify-content: space-between; align-items: center;">
								<p:outputLabel value="Telefon:" for="phoneNumber" />
								<p:inputText id="phoneNumber"
									value="#{personDAO.person.phoneNumber}" size="25"
									style="width: 200px;" />
							</div>
							<h:outputText value="Neue Personen-ID: #{netzDAO.newPersonId}"
								rendered="#{netzDAO.newPersonId != null}" />
						</div>
					</h:panelGroup>
				</p:card>
			</p:outputPanel>
			<p:messages autoUpdate="true" showDetail="false" />

			<p:commandButton value="Bestätigen" icon="pi pi-check-circle"
				action="#{netzDAO.saveNet}" ajax="false" style="margin-top:22px" />

			<!--immediate="true" um Validierung zu umgehen  -->
			<p:commandButton value="Abbrechen" icon="pi pi-times-circle"
				styleClass="ui-button-secondary" action="#{actionController.index}"
				ajax="false" immediate="true"
				style="margin-top:22px; margin-left:10px" />
		</h:form>
	</p:card>
</h:body>
</html>



